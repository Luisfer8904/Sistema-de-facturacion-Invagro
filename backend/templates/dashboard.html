{% extends "base.html" %}
{% block title %}Dashboard | Sistema de Facturacion Invagro{% endblock %}
{% block body_class %}page dashboard-page{% endblock %}
{% block content %}
  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <img class="sidebar-logo" src="/static/assets/logo.jpg" alt="Invagro" />
        <h3>Invagro</h3>
      </div>
      <nav class="sidebar-nav">
        <a class="nav-item active" href="/dashboard">Dashboard</a>
        <a class="nav-item" href="/facturacion">Facturacion</a>
        <a class="nav-item" href="/pedidos">Pedidos</a>
        <a class="nav-item" href="/facturas/credito">Facturas credito</a>
        <a class="nav-item" href="/pagos">Pagos</a>
        <a class="nav-item" href="/facturas/historial">Historial facturas</a>
        <a class="nav-item" href="/clientes">Clientes</a>
        <a class="nav-item" href="/productos">Productos</a>
        <a class="nav-item" href="/reportes">Reportes</a>
        <a class="nav-item" href="/ajustes">Ajustes</a>
      </nav>
      <div class="sidebar-footer">
        <img class="sidebar-mascot" src="/static/assets/mascota.jpeg" alt="Mascota" />
      </div>
    </aside>

    <div class="main-content">
      <div class="topbar">
        <div class="topbar-left">
          <h2>Resumen</h2>
        </div>
        <div class="topbar-right">
          <span class="user-pill">Sesion: {{ user }}</span>
        </div>
      </div>

      <main class="content-area">
        <section class="welcome-card">
          <h1>Bienvenido</h1>
          <p>Tu panel de control esta listo para gestionar la facturacion.</p>
        </section>

        <section class="modules-grid">
          <article class="module-card">
            <h3>Clientes</h3>
            <p>Administra tu base de clientes y contactos.</p>
            <a class="module-link" href="/clientes">Entrar</a>
          </article>
          <article class="module-card">
            <h3>Facturacion</h3>
            <p>Genera comprobantes y controla estados.</p>
            <a class="module-link" href="/facturacion">Entrar</a>
          </article>
          <article class="module-card">
            <h3>Pedidos</h3>
            <p>Registra pedidos y cargalos luego a factura.</p>
            <a class="module-link" href="/pedidos">Entrar</a>
          </article>
          <article class="module-card">
            <h3>Productos</h3>
            <p>Catalogo de productos veterinarios y shampoo.</p>
            <a class="module-link" href="/productos">Entrar</a>
          </article>
          <article class="module-card">
            <h3>Reportes</h3>
            <p>Indicadores clave para decisiones.</p>
            <a class="module-link" href="/reportes">Entrar</a>
          </article>
        </section>

        <section class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Credito pendiente</div>
            <div class="stat-value">{{ "{:,}".format(facturas_credito_count or 0) }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Total credito</div>
            <div class="stat-value">L {{ "{:,.2f}".format(credito_total or 0) }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Credito &lt; 30 dias</div>
            <div class="stat-value">L {{ "{:,.2f}".format(credito_menor_30 or 0) }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Credito &gt;= 30 dias</div>
            <div class="stat-value">L {{ "{:,.2f}".format(credito_mayor_30 or 0) }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Clientes</div>
            <div class="stat-value">{{ "{:,}".format(clientes_count or 0) }}</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Productos</div>
            <div class="stat-value">{{ "{:,}".format(productos_count or 0) }}</div>
          </div>
        </section>
      </main>
    </div>
  </div>
{% endblock %}
